<!DOCTYPE html>

<html>
    
    <head>
        <meta charset=utf-8>
        <meta name="keywords" content="waloncab Walon Cab web Blog">
		<meta name="description" 
		      content="Walon Cab s-Lines Blog">
		<meta name="Author" content="Walon Cab">
        
        <title>walon/cab:s.ln_blog</title>

        <link rel="stylesheet" href="https://waloncab.github.io/s.ln_blog/assets/css/body.css">

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-GP7FZ2055V"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-GP7FZ2055V');
        </script>

        <!-- FAVICONS -->

        <link rel="apple-touch-icon" sizes="180x180" href="https://waloncab.github.io/s.ln_blog/assets/fav/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://waloncab.github.io/s.ln_blog/assets/fav/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://waloncab.github.io/s.ln_blog/assets/fav/favicon-16x16.png">
        <link rel="manifest" href="https://waloncab.github.io/s.ln_blog/assets/fav/site.webmanifest">
        <link rel="mask-icon" href="https://waloncab.github.io/s.ln_blog/assets/fav/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">

    </head>

    <body>

        <div class="content">

            <div class="header">

    <style>
        .header {
            padding: 10px;
            text-align: center;
            background: #1abc9c;
            color: rgb(255, 255, 255);;
            font-size: 20px;

            border: 2px solid rgb(255, 0, 179);
            border-radius: 5px;
        }
    </style>
                      
    <h1>walon/cab:s.ln_blog</h1>

    <!-- Add icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="https://waloncab.github.io/s.ln_blog/assets/css/social.css">

    <p>
        <a href="https://www.youtube.com/channel/UCJX8AUDFcQJMjY1zRivvZqw" class="fa fa-youtube"></a>
        <a href="https://www.instagram.com/walon_cab/" class="fa fa-instagram"></a>
        <a href="https://www.instagram.com/walon_cab/" class="fa fa-facebook"></a>
        <a href="https://twitter.com/WalonCab" class="fa fa-twitter"></a>
    </p>

</div> 

            <br>
            
            <link rel="stylesheet" href="https://waloncab.github.io/s.ln_blog/assets/css/nav.css">

<!-- https://www.w3schools.com/howto/howto_js_topnav_responsive.asp -->

<div class="topnav" id="myTopnav">

    <!-- <a href="https://waloncab.github.io/s.ln_blog/index.html" class="active">Blog</a>
    <a href="https://waloncab.github.io/s.ln_blog/about">About</a>
    <a href="https://waloncab.github.io/s.ln_blog/demos">Demos</a> -->

    <!-- <ul> -->

        
        
        <!-- https://stackoverflow.com/questions/8340170/jekyll-automatically-highlight-current-tab-in-menu-bar -->



  <!-- VARIABLES -->

  
  

  
  


  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    

    <!-- 'contains' because need to consider paginated urls. -->

    

      <!-- Exclusive if to consider Home page -->
      <!-- Needs to be here to mathc the nav order -->

      

      <!-- ELSE show non selected -->

      <a href="https://waloncab.github.io/s.ln_blog/about/">About</a>
    

  
  


  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    

    <!-- 'contains' because need to consider paginated urls. -->

    

      <!-- Exclusive if to consider Home page -->
      <!-- Needs to be here to mathc the nav order -->

      

      <!-- ELSE show non selected -->

      <a href="https://waloncab.github.io/s.ln_blog/demos/">Demos</a>
    

  
  


  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    

    <!-- 'contains' because need to consider paginated urls. -->

    

      <!-- Exclusive if to consider Home page -->
      <!-- Needs to be here to mathc the nav order -->

      

      <!-- ELSE show non selected -->

      <a href="https://waloncab.github.io/s.ln_blog/">Home</a>
    

  
  


  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    

    <!-- 'contains' because need to consider paginated urls. -->

    

      <!-- Exclusive if to consider Home page -->
      <!-- Needs to be here to mathc the nav order -->

      

      <!-- ELSE show non selected -->

      <a href="https://waloncab.github.io/s.ln_blog/blog/">Blog</a>
    

  
  


  <!-- VARIABLES -->

  
  

  
  


  <!-- VARIABLES -->

  
  

  
  


  <!-- VARIABLES -->

  
  

  
  


  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  

    <!-- Delete all pagination from index -->

    
      

  <!-- VARIABLES -->

  
  

  
  


<!-- ASSIGN -->




    <!-- </ul> -->

    <div class="search-container">

        
        <!-- <form action="/action_page.php">
          <input type="text" placeholder="Search.." name="search">
          <button type="submit">Submit</button>
        </form> -->

        <form action='https://waloncab.github.io/s.ln_blog/search.html' method="get">
            <input type="text" id="search-box" name="query">
            <!-- <input type="submit" value="search"> -->
            <button type="submit" value="search">Submit</button>
        </form>
    </div>

    <a href="javascript:void(0);" class="icon" onclick="myFunction()">
      <i class="fa fa-bars"></i>
    </a>

</div>

<script>
    /* Toggle between adding and removing the "responsive" class to topnav when the user clicks on the icon */
    function myFunction() {
        var x = document.getElementById("myTopnav");
        if (x.className === "topnav") {
            x.className += " responsive";
        } else {
            x.className = "topnav";
        }
    }
</script>

            <br>

            <h1>Matrix Transformation for Rendering 3D objects</h1>

<!-- PAGE CATEGORIES -->

<hr>



    <button type="button" 
            onclick="window.location.href='https://waloncab.github.io/s.ln_blog/search.html?query=blog';">
        blog
    </button> 



    <button type="button" 
            onclick="window.location.href='https://waloncab.github.io/s.ln_blog/search.html?query=pyhton';">
        pyhton
    </button> 



    <button type="button" 
            onclick="window.location.href='https://waloncab.github.io/s.ln_blog/search.html?query=render';">
        render
    </button> 



    <button type="button" 
            onclick="window.location.href='https://waloncab.github.io/s.ln_blog/search.html?query=openGL';">
        openGL
    </button> 



<hr>

<!-- <h3> Matrix Transformations & Rendering 3D</h3> -->

<p>
    Transformations are at the core of any rendering engine. 
    Vectors and matrices are the basic data structures that allow to
    desgin and create functions to transform set of points in certain geometric way.
</p>

<h3> Points / Vectors / Matrices</h3>
<p>
    Both points and vectors are represented by a list of numbers, but they have different geometric interpretations.
    Points are simple a defined position in a space but vectors represent a direction within that space.
    Matrices are the best mathematical construct to apply transformations to the points and vectors, GPUs are highly optimized
    to compute matrix multiplications in parallel.
</p>

<h3> What kind of operations are needed in the 3D space ? </h3>

<p>Well, in any rendering engine, we require the following:</p>

<ul>
    <li>translation</li>
    <li>rotation</li>
    <li>scale</li>
</ul>

<p> Keep reding the text and imagine that transformations are applied from the origin of the coordinate system (global coordinates), 
    we'll consider local transformations later  </p>

<h3>4x4 Matrix in a 3D Space</h3>

<p> <a href="https://en.wikipedia.org/wiki/Homogeneous_coordinates">homogeneuos coordinates</a> are a system of coordinates used in projective geometry.
    They have the advantage that the coordinates of points, including points at infinity, can be represented using finite coordinates.
    Since translation is not a linear transformation we need to embed 3x3 matrices in a 4x4 matrices, <a href="https://en.wikipedia.org/wiki/Translation_(geometry)">find out why</a>
</p>

<h3> Basic Transformation Matrices</h3>

<p>
For any given object we need to translate, rotate, and scale. Each one of this scene objects need to store transformation data in a 4x4 matrix. 
The matrix multiplication allow to easily modify the transformation data the object stores.
The following blocks of code create the most basic matrices in numpy arrays.
</p>

<h3>Model Matrix</h3>

    <p>
    A matrix is used to store the transformation of any object, but what about the points / vertices of that object in the case that 
    it renders some kind of mesh ?
    </p>

    <p>Storing the transformation in the model matrix allows : </p>

    <ul>
        <li>chain transformations by multiplying the model matrix of the object, the result matrix will store the acumulated transformatins.</li>
        <li>render a complex mesh without having to store the vertices of the mesh inside the object.</li>
    </ul>

<figure class="highlight"><pre><code class="language-pyhton" data-lang="pyhton">def init_Identity():

    return np.array( [
        [1, 0, 0, 0],
        [0, 1, 0, 0],
        [0 ,0, 1, 0],
        [0, 0, 0, 1]
    ]).astype(float)</code></pre></figure>

<figure class="highlight"><pre><code class="language-pyhton" data-lang="pyhton">def init_Translation(x,y,z):

    return np.array( [
        [1, 0, 0, x],
        [0, 1, 0, y],
        [0 ,0, 1, z],
        [0, 0, 0, 1]
    ]).astype(float)</code></pre></figure>

<p>
    The followings lines of code represent the rotation matrices for the x,y,z axes.
    Rotation happens around an axis, and the rotation matrix does not move the axis.
    Rotation can be produced arond any vector, but we are considering just the rotation around the 
    basis vectors (axis) since other roations can be derived later from the world matrix.
</p>

<figure class="highlight"><pre><code class="language-pyhton" data-lang="pyhton">def init_RotationX(angle):

    c = cos(angle)
    s = sin(angle)

    return np.array( [
        [1, 0,  0, 0],
        [0, c, -s, 0],
        [0 ,s,  c, 0],
        [0, 0,  0, 1]
    ]).astype(float)

def init_RotationY(angle):

    c = cos(angle)
    s = sin(angle)

    return np.array( [
        [ c, 0, s, 0],
        [ 0, 1, 0, 0],
        [-s ,0, c, 0],
        [ 0, 0, 0, 1]
    ]).astype(float)

def init_RotationZ(angle):

    c = cos(angle)
    s = sin(angle)

    return np.array( [
        [c, -s, 0, 0],
        [s, c, 0, 0],
        [0 ,0, 1, 0],
        [0, 0, 0, 1]
    ]).astype(float)</code></pre></figure>

<p>
    This scale matrix only accepts one parameter scaling the object uniformly along the x,y, axes.
</p>

<figure class="highlight"><pre><code class="language-pyhton" data-lang="pyhton">def init_Scale(s):

    return np.array( [
        [s, 0, 0, 0],
        [0, s, 0, 0],
        [0 ,0, s, 0],
        [0, 0, 0, 1]
    ]).astype(float)</code></pre></figure>

<h3> Local vs Global Coordinates </h3>

<p>
    When we multiply any of the previous matrices by some point we are transforming that point in a global coordinate system (Origin(0,0,0)). 
    For example, when multiplying a point by the translation matrix the point moves along the basis x,y,z axis.
    Local transformations requiere to define an internal local coordinate system. Origin, orientation, and scale of the
    local coordinate axes are chosen for conviniece, but usually the center of the object is selected to transform locally.
</p>

<h3> How to use matrix multiplication to perform transformations in Local Coordinate Systems </h3>

    <p>
        Let's keep it simple, in order to perform any global transformation we chain matrix multiplications on the left side of expression.
        To achive local transformations just multiply on the right side of the expression. 
        Keep in mind that matrix multiplication is not commutative: A*B != B*A 
    </p>

    <ul>
        <li>Global Transformation: T3 * T2 * T1 * M(model_matrix)</li>
        <li>Local Transformation: M(model_matrix) * T1 * T2 * T3</li>
    </ul>

<p>
    Perspective matrix for rendering the scene.
</p>

<ul>
    <li>Frustum: truncated pyramid that defines the visible region.</li>
    <li>Parameters</li>
    <ul>
        <li>near / far distance: </li>
        <li>angle of view: the angle between fron and bottom frustom planes.</li>
        <li>aspect ratio: width / height of the rendered image.</li>
    </ul>

<figure class="highlight"><pre><code class="language-pyhton" data-lang="pyhton">def init_Perspective(angleOfView=60, aspectRatio=1, near=0.1, far=1000):

    #convert to radians
    a = angleOfView *pi/180
    d = 1.0 / tan(a/2)
    r = aspectRatio
    b = (far + near) / (near - far)
    c =  2 * far * near / (near - far)

    return np.array( [
        [d/r, 0, 0, 0],
        [0, d, 0, 0],
        [0 ,0, b, c],
        [0, 0, -1, 0]
    ]).astype(float)</code></pre></figure>

<!-- INCLUDE spline / procedural -->





<!-- RELATED POSTS -->

<h3>Related Posts</h3>



<div class="child">

    

        <link rel="stylesheet" href="https://waloncab.github.io/s.ln_blog/assets/css/post.css">

<div class="post">
    <a href="https://waloncab.github.io/s.ln_blog/posts/rendering_engine_architecture.html">Rendering Engine Architecture</a>
    <p>2022-07-20 17:00:00 +0200</p>
    <p>- graphics library vs rendering engine OpenGL is a graphics library with many functions for drawing complex geometries based on more simple geometry primitives such as points, lines and triangles. A rendering engine is a well defined framework that uses some of the graphics library functions to deliver a simple...</p>
</div>
            
        <br>

    

        <link rel="stylesheet" href="https://waloncab.github.io/s.ln_blog/assets/css/post.css">

<div class="post">
    <a href="https://waloncab.github.io/s.ln_blog/posts/matrix_transformations.html">Matrix Transformation for Rendering 3D objects</a>
    <p>2022-07-20 17:00:00 +0200</p>
    <p>Transformations are at the core of any rendering engine. Vectors and matrices are the basic data structures that allow to desgin and create functions to transform set of points in certain geometric way. Points / Vectors / Matrices Both points and vectors are represented by a list of numbers, but...</p>
</div>
            
        <br>

    

        <link rel="stylesheet" href="https://waloncab.github.io/s.ln_blog/assets/css/post.css">

<div class="post">
    <a href="https://waloncab.github.io/s.ln_blog/posts/git_automation.html">Git Commit Automation with Python</a>
    <p>2022-07-20 17:00:00 +0200</p>
    <p>This web page is a complex piece of software. There are a few layers that composes the web, having jekyll as the backend and standard html, css, and javascript on the front-end. Since jekyll is a lightweight static web page generator, the site has to be built before uploading it...</p>
</div>
            
        <br>

    

        <link rel="stylesheet" href="https://waloncab.github.io/s.ln_blog/assets/css/post.css">

<div class="post">
    <a href="https://waloncab.github.io/s.ln_blog/posts/spline_plot.html">Plotting Splines with Plotly and export into HTML</a>
    <p>2022-07-15 09:56:49 +0200</p>
    <p>This spline plot has been generated using Plotly. There are many scenarios where a completly graphics engine is not necesary. Static visualization can be accomplished with simple libraries such as this one. Keep in mind what your target platforms for the plots are, and then have a look what fits...</p>
</div>
            
        <br>

    

        <link rel="stylesheet" href="https://waloncab.github.io/s.ln_blog/assets/css/post.css">

<div class="post">
    <a href="https://waloncab.github.io/s.ln_blog/posts/Casteljau's-Algorithm.html">Casteljau's Algorithm</a>
    <p>2021-11-20 08:56:49 +0100</p>
    <p>Sometimes you need to define n-point curves, and generic bezier may fit your needs in those cases. The following lines of code represent how to design a generic bezier curve, n-grade curve. This algorithm uses recursion to iterate throw the entire interpolation points. Parameters: points: the vector containing the curve...</p>
</div>
            
        <br>

    

</div>

            <br>

            <div class="footer">

    <style>
        .footer{
            padding: 10px;
            text-align: center;
            background: #1abc9c;
            color: rgb(255, 255, 255);;
            font-size: 12px;

            border: 2px solid rgb(255, 0, 179);
            border-radius: 5px;
        }

        .grid-container {
            display: grid;
            grid-template-columns: auto auto auto;
            grid-gap: 10px;
            /* background-color: #2196F3; */
            /* padding: 10px; */
            }

            .grid-container > div {
            background-color: rgba(255, 255, 255, 0.2);
            padding: 0px 10px;
            font-size: 14px;
            text-align:left;
            }

            /* .item4 {
            grid-row-start: 1;
            grid-row-end: 3;
            } */
    </style>

    <link rel="stylesheet" href="https://waloncab.github.io/s.ln_blog/assets/css/rotate.css">

    <div class="grid-container">

        <div class="item1" id="rotator">
            <img src="https://waloncab.github.io/s.ln_blog/assets/img/fire_buble.png" alt="Walon Cab" width="128" height="128" align="center" class="rotate">
        </div>

        <div class="item2">
            <p class="right">Graphics rendering and spline algorithms. Kinematics from the bezier curves by  traversing generated paths, then embedding them into rendering and game engines. Stay tunned for the Spline Lab!</p>

            <p align="center">
                &copy; 2021 Walon Cab
            </p>
        </div>

        <div class="item3">
            <p>Maecenas tempor massa sed aliquet mattis. Nam ac arcu arcu. Nunc tempor vel urna vitae tristique. 
                Quisque aliquam efficitur nibh, quis dignissim velit vulputate non.
            </p>

            <p align="center">
                <a href="https://www.youtube.com/channel/UCJX8AUDFcQJMjY1zRivvZqw" class="fa fa-youtube"></a>
                <a href="https://www.instagram.com/waloncab/" class="fa fa-instagram"></a>
                <a href="https://www.instagram.com/waloncab/" class="fa fa-facebook"></a>
                <a href="https://twitter.com/WalonCab" class="fa fa-twitter"></a>
            </p>
        </div>  
        <!-- <div class="item4">4</div>
        <div class="item5">5</div>
        <div class="item6">6</div>
        <div class="item7">7</div>
        <div class="item8">8</div>   -->
      </div>

      <!-- https://www.w3schools.com/css/css_grid.asp
      https://www.w3schools.com/css/tryit.asp?filename=trycss_grid_lines2 -->

</div>

        </div>

    </body>

</html> 